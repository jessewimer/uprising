{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uprising Seeds - Admin Dashboard</title>

    <!-- link base.css -->
    <!-- <link rel="stylesheet" href="{% static 'office/css/base.css' %}"> -->
    <link rel="stylesheet" href="{% static 'office/css/admin_dashboard.css' %}">
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1 class="brand-title">Admin Dashboard</h1>
            <p class="brand-subtitle">System Administration</p>
        </div>

        <!-- Admin Cards Section -->
        <div class="admin-container">
            <!-- Add Variety -->
            <div class="admin-card" onclick="openVarietyModal()">
                <div class="admin-icon">üå±</div>
                <h3 class="admin-title">Add Variety</h3>
                <p class="admin-description">Add a new variety to the database</p>
            </div>

            <!-- System Settings -->
            <div class="admin-card" onclick="openSystemSettingsModal()">
                <div class="admin-icon">‚öôÔ∏è</div>
                <h3 class="admin-title">System Settings</h3>
                <p class="admin-description">Configure system-wide settings and preferences</p>
            </div>

            <!-- Database Management -->
            <a href="#" class="admin-card">
                <div class="admin-icon">üóÑÔ∏è</div>
                <h3 class="admin-title">Database Admin</h3>
                <p class="admin-description">Direct access to Django admin interface</p>
            </a>

            <!-- Logs & Monitoring -->
            <a href="#" class="admin-card">
                <div class="admin-icon">üìä</div>
                <h3 class="admin-title">Logs & Monitoring</h3>
                <p class="admin-description">View system logs and monitor performance</p>
            </a>

            <!-- Backup & Maintenance -->
            <a href="#" class="admin-card">
                <div class="admin-icon">üîß</div>
                <h3 class="admin-title">Backup & Maintenance</h3>
                <p class="admin-description">Database backups and system maintenance tools</p>
            </a>

            <!-- Security -->
            <a href="#" class="admin-card">
                <div class="admin-icon">üîí</div>
                <h3 class="admin-title">Security</h3>
                <p class="admin-description">Security settings and access controls</p>
            </a>
        </div>

        <!-- Footer with Back Button -->
        <div class="footer">
            <a href="{% url 'office_landing' %}" class="back-button">
                ‚Üê Back to Dashboard
            </a>
        </div>
    </div>

    <!-- System Settings Modal -->
    <div id="systemSettingsModal" class="modal-overlay">
        <div class="modal">
            <button class="close-modal" onclick="closeSystemSettingsModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">System Settings</h2>
                <p class="modal-subtitle">Configure system-wide options</p>
            </div>

            <div class="settings-grid">
                <div class="settings-btn" onclick="openWholesalePriceModal()">
                    <div class="settings-btn-text">Set Wholesale Pkt Price</div>
                </div>
                
                <!-- Add more settings buttons here in the future -->
            </div>
        </div>
    </div>

    <!-- Wholesale Price Modal -->
    <div id="wholesalePriceModal" class="modal-overlay">
        <div class="modal" style="width: 450px;">
            <button class="close-modal" onclick="closeWholesalePriceModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Set Wholesale Packet Price</h2>
                <p class="modal-subtitle">Configure pricing for a specific year</p>
            </div>

            <div id="wholesalePriceSuccessMessage" class="success-message">
                Wholesale price updated successfully!
            </div>

            <form id="wholesalePriceForm">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="price_year">Year (2 digits) *</label>
                        <input type="number" id="price_year" name="year" min="0" max="99" required 
                               placeholder="e.g., 25 for 2025">
                        <div class="error-message" id="year_error"></div>
                    </div>

                    <div class="form-group">
                        <label for="price_per_packet">Price Per Packet *</label>
                        <input type="number" id="price_per_packet" name="price_per_packet" 
                               step="0.01" min="0" required placeholder="e.g., 0.50">
                        <div class="error-message" id="price_per_packet_error"></div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeWholesalePriceModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Price</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Variety Modal -->
    <div id="varietyModal" class="modal-overlay">
        <div class="modal">
            <button class="close-modal" onclick="closeVarietyModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Add New Variety</h2>
            </div>

            <div id="varietySuccessMessage" class="success-message">
                Variety created successfully! 
            </div>

            <form id="varietyForm">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="sku_prefix">SKU Prefix *</label>
                        <input type="text" id="sku_prefix" name="sku_prefix" required>
                        <div class="error-message" id="sku_prefix_error"></div>
                    </div>

                    <div class="form-group">
                        <label for="var_name">Variety Name</label>
                        <input type="text" id="var_name" name="var_name">
                    </div>

                    <div class="form-group">
                        <label for="crop">Crop</label>
                        <select id="crop" name="crop">
                            <option value="">Select a crop...</option>
                            {% for crop in crops %}
                                <option value="{{ crop }}">{{ crop }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="common_spelling">Common Spelling</label>
                        <input type="text" id="common_spelling" name="common_spelling">
                    </div>

                    <div class="form-group">
                        <label for="common_name">Common Name</label>
                        <input type="text" id="common_name" name="common_name">
                    </div>

                    <div class="form-group">
                        <label for="group">Group</label>
                        <select id="group" name="group">
                            <option value="">Select a group...</option>
                            {% for group in groups %}
                                <option value="{{ group }}">{{ group }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="veg_type">Vegetable Type</label>
                        <select id="veg_type" name="veg_type">
                            <option value="">Select a vegetable type...</option>
                            {% for veg_type in veg_types %}
                                <option value="{{ veg_type }}">{{ veg_type }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="species">Species</label>
                        <input type="text" id="species" name="species">
                    </div>

                    <div class="form-group">
                        <label for="subtype">Subtype</label>
                        <select id="subtype" name="subtype">
                            <option value="">Select a subtype...</option>
                            {% for subtype in subtypes %}
                                <option value="{{ subtype }}">{{ subtype }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="days">Days</label>
                        <input type="text" id="days" name="days" placeholder="e.g. 55-60 Days">
                    </div>

                    <div class="form-group">
                        <label for="stock_qty">Stock Quantity</label>
                        <input type="text" id="stock_qty" name="stock_qty">
                    </div>

                    <div class="form-group">
                        <label for="photo_path">Photo Path</label>
                        <input type="text" id="photo_path" name="photo_path">
                    </div>

                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" name="category">
                            <option value="">Select a category...</option>
                            {% for category in categories %}
                                <option value="{{ category }}">{{ category }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="active" name="active" checked>
                        <label for="active">Active</label>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="wholesale" name="wholesale">
                        <label for="wholesale">Wholesale</label>
                    </div>

                    <div class="form-group">
                        <label for="desc_line1">Description Line 1</label>
                        <textarea id="desc_line1" name="desc_line1"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="desc_line2">Description Line 2</label>
                        <textarea id="desc_line2" name="desc_line2"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="desc_line3">Description Line 3</label>
                        <textarea id="desc_line3" name="desc_line3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back1">Back 1</label>
                        <textarea id="back1" name="back1"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back2">Back 2</label>
                        <textarea id="back2" name="back2"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back3">Back 3</label>
                        <textarea id="back3" name="back3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back4">Back 4</label>
                        <textarea id="back4" name="back4"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back5">Back 5</label>
                        <textarea id="back5" name="back5"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back6">Back 6</label>
                        <textarea id="back6" name="back6"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="back7">Back 7</label>
                        <textarea id="back7" name="back7"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="ws_notes">Wholesale Notes</label>
                        <textarea id="ws_notes" name="ws_notes"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="ws_description">Wholesale Description</label>
                        <textarea id="ws_description" name="ws_description"></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeVarietyModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Variety</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal-overlay">
        <div class="modal">
            <button class="close-modal" onclick="closeProductModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Add Product</h2>
            </div>

            <div id="productSuccessMessage" class="success-message">
                Product created successfully! 
            </div>

            <form id="productForm">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="product_variety">Variety</label>
                        <input type="text" id="product_variety" name="variety" readonly>
                    </div>

                    <div class="form-group">
                        <label for="sku_suffix">SKU Suffix *</label>
                        <select id="sku_suffix" name="sku_suffix" required>
                            {% for sku_suffix in sku_suffixes %}
                                <option value="{{ sku_suffix }}" {% if sku_suffix == 'pkt' %}selected{% endif %}>{{ sku_suffix }}</option>
                            {% endfor %}
                        </select>
                        <div class="error-message" id="sku_suffix_error"></div>
                    </div>

                    <div class="form-group">
                        <label for="pkg_size">Package Size</label>
                        <select id="pkg_size" name="pkg_size">
                            <option value="">Select a package size...</option>
                            {% for pkg_size in pkg_sizes %}
                                <option value="{{ pkg_size }}">{{ pkg_size }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="alt_sku">Alternative SKU</label>
                        <input type="text" id="alt_sku" name="alt_sku">
                    </div>

                    <div class="form-group">
                        <label for="lineitem_name">Line Item Name</label>
                        <input type="text" id="lineitem_name" name="lineitem_name">
                    </div>

                    <div class="form-group">
                        <label for="rack_location">Rack Location</label>
                        <input type="text" id="rack_location" name="rack_location">
                    </div>

                    <div class="form-group">
                        <label for="env_type">Envelope Type</label>
                        <select id="env_type" name="env_type">
                            <option value="">Select an envelope type...</option>
                            {% for env_type in env_types %}
                                <option value="{{ env_type }}">{{ env_type }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="env_multiplier">Envelope Multiplier</label>
                        <input type="number" id="env_multiplier" name="env_multiplier">
                    </div>

                    <div class="form-group">
                        <label for="label">Label</label>
                        <input type="text" id="label" name="label" maxlength="1">
                    </div>

                    <div class="form-group">
                        <label for="num_printed">Number Printed</label>
                        <input type="number" id="num_printed" name="num_printed">
                    </div>

                    <div class="form-group">
                        <label for="num_printed_next_year">Number Printed Next Year</label>
                        <input type="number" id="num_printed_next_year" name="num_printed_next_year" value="0">
                    </div>

                    <div class="form-group">
                        <label for="scoop_size">Scoop Size</label>
                        <input type="text" id="scoop_size" name="scoop_size">
                    </div>

                    <div class="form-group">
                        <label for="bulk_pre_pack">Bulk Pre Pack</label>
                        <input type="number" id="bulk_pre_pack" name="bulk_pre_pack" value="0">
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="print_back" name="print_back">
                        <label for="print_back">Print Back</label>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="is_sub_product" name="is_sub_product">
                        <label for="is_sub_product">Is Sub Product</label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- In admin_dashboard.html -->
    <script>
        window.appUrls = {
            setWholesalePrice: "{% url 'set_wholesale_price' %}",
            addVariety: "{% url 'add_variety' %}",
            addProduct: "{% url 'add_product' %}"
        };
    </script>
    <script src="{% static 'office/js/admin_dashboard.js' %}"></script>

</body>
</html>